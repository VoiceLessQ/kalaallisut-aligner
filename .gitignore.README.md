# .gitignore Configuration Guide

## Quick Reference: What's Tracked vs. Ignored

### ✅ TRACKED (In Repository)

#### Source Code
```
src/
  ├── aligner.py
  ├── morphology.py
  ├── preprocessor.py
  ├── config.py
  ├── utils.py
  ├── audio_transcriber.py
  ├── feature_extractor.py
  └── tts_aligner.py
```

#### Scripts
```
scripts/
  ├── *.py (all Python scripts)
  ├── align_production.sh
  ├── align_with_hunalign.sh
  ├── test_morphology.py
  ├── append_parallel_corpus.py
  └── calculate_stats_fast.py
  ❌ deploy_*.sh (excluded)
```

#### Examples
```
examples/
  ├── align_example.py
  ├── tts_alignment_demo.py
  └── README.md
  ❌ example_output.txt (excluded)
  ❌ *.output.* (excluded)
```

#### Tests
```
tests/
  ├── test_aligner.py
  ├── test_preprocessor.py
  ├── test_utils.py
  └── conftest.py
```

#### Essential Data Files (Small & Required)
```
data/processed/
  ✅ cognates.json (~50KB)
  ✅ hunalign_dict_full.txt (~150KB)
  ✅ alignment_stats.json (~1KB)
  ✅ hunalign_dict.txt (~50KB)
  ❌ train.txt (~1MB - regenerable)
  ❌ test.txt (~200KB - regenerable)
  ❌ *.backup (excluded)

glosser/
  ✅ kalaallisut_english_dict.json (16,819 entries, ~2MB - essential)
  ✅ morpheme_glosses.json (~10KB)
```

#### Documentation
```
✅ README.md
✅ CHANGELOG.md
✅ CLEANUP_REPO.md
✅ CODE_RECOMMENDATIONS.md
✅ ANALYSIS.md
✅ LICENSE
✅ docs/GUIDE.md
✅ docs/TTS_BASED_ALIGNMENT.md
❌ clean up.md (temporary notes)
```

#### Configuration
```
✅ requirements.txt
✅ config.json.example
✅ pytest.ini
✅ .github/workflows/test.yml
```

### ❌ IGNORED (Not in Repository)

#### Generated/Large Data Files
```
data/
  ├── raw/*.txt (user data)
  ├── aligned/*.txt (generated outputs)
  ├── test/*.txt (large corpus files, ~1MB)
  └── processed/
      ├── train.txt (generated, ~1MB)
      └── test.txt (generated, ~200KB)
```

#### Audio Files
```
Audio/
  ├── *.wav
  ├── *.mp3
  └── *.ogg
```

#### Backups & Temporary Files
```
*.backup
*.bak
*.tmp
*.log
*~
*.swp
```

#### Build Artifacts
```
__pycache__/
*.pyc
*.egg-info/
dist/
build/
docs/build/
```

#### System Files
```
.DS_Store (macOS)
Thumbs.db (Windows)
*.lnk (Windows shortcuts)
.vscode/ (IDE settings)
.idea/ (IDE settings)
```

#### Deployment Scripts
```
deploy_all.sh
deploy_clean.sh
deploy_*.sh
```

## Why This Structure?

### Large Data Files → Ignored
**Files like `train.txt` (8,178 pairs) and `parallel_corpus_clean.txt` (~1MB)**

❌ **Problems with tracking:**
- Makes repository large and slow
- Every change creates a new version (bloats history)
- Not suitable for git (binary/large text files)

✅ **Solution:**
- Ignore in git
- Provide scripts to regenerate (`append_parallel_corpus.py`)
- Document how to obtain/create them
- Keep the small stats file (`alignment_stats.json`)

### Essential Configs → Tracked
**Files like `alignment_stats.json` (< 1KB) and dictionaries**

✅ **Why track:**
- Small size
- Required for aligner to work
- Not easily regenerable without full dataset
- Configuration, not data

### Generated Outputs → Ignored
**Files like `data/aligned/*.txt` and `example_output.txt`**

❌ **Why ignore:**
- Created by running scripts
- User-specific results
- Can be recreated anytime
- Waste of repository space

## Best Practices

### When Adding New Files

**Ask yourself:**

1. **Is it source code?** → Track it
2. **Is it generated?** → Ignore it
3. **Is it large (>100KB)?** → Probably ignore it
4. **Is it user data?** → Ignore it
5. **Is it essential config?** → Track it if small

### Examples

✅ **Track:**
- `scripts/new_feature.py` (source code)
- `data/processed/new_dict.json` (small config, <100KB)
- `docs/NEW_FEATURE.md` (documentation)

❌ **Ignore:**
- `data/aligned/my_results.txt` (generated output)
- `data/test/huge_corpus.txt` (large data file)
- `experiments/test_output.csv` (experimental results)
- `*.backup` (backup files)

## Repository Size Guidelines

**Target repository size:** < 10 MB (excluding .git history)

**Current breakdown (after cleanup):**
```
Source code:          ~100 KB
Essential dicts:      ~2 MB (kalaallisut_english_dict.json)
Small configs:        ~200 KB
Documentation:        ~50 KB
Tests:               ~50 KB
Configuration:       ~10 KB
─────────────────────────────
Total:               ~2.5 MB ✅
```

**If you included ignored files:**
```
Training data:        ~1 MB (train.txt)
Test data:           ~200 KB (test.txt)
Aligned outputs:     ~500 KB
Audio samples:       ~1 MB
Backups:            ~500 KB
─────────────────────────────
Would add:          ~3.2 MB ❌
```

## How to Check What's Tracked

```bash
# List all tracked files
git ls-files

# List tracked files by size
git ls-files | xargs ls -lh | sort -k5 -h -r | head -20

# Check what would be committed
git status

# See what's ignored
git status --ignored
```

## Maintenance

Review `.gitignore` when:
- Adding new data directories
- Creating new output formats
- Adding new build artifacts
- Setting up new tools/IDEs

**Regular cleanup:**
```bash
# Remove files that were added before .gitignore update
./cleanup_tracked_files.sh

# Check for large files in history
git rev-list --all --objects | grep -f <(git verify-pack -v .git/objects/pack/*.idx | sort -k 3 -n | tail -20 | awk '{print $1}')
```
